@page "/book_details/{Olid}"
@inject OpenLibraryService BookService
@inject NavigationManager Navigation
@rendermode InteractiveServer

<PageTitle>Buchdetails</PageTitle>

<div class="book-details">
    @if (isLoading)
    {
        <p>Lade Buchdetails...</p>
    }
    else if (errorMessage != null)
    {
        <p style="color: red;">@errorMessage</p>
    }
    else if (book != null)
    {
        <h2>@book.Title</h2>
        <p><strong>Autor:</strong> @string.Join(", ", book.Author_Name)</p>
        <p><strong>Erste Satz:</strong> @book.First_Sentence</p>
        <img src="@book.CoverUrl" alt="@book.Title" width="200" />
    }
</div>

@code {
    [Parameter]
    public string Olid { get; set; }

    private Book book;
    private bool isLoading = true;
    private string errorMessage;

    protected override async Task OnInitializedAsync()
    {
        try
        {
            book = await BookService.GetBookByOlid(Olid);
            if (book == null)
            {
                errorMessage = "Buch nicht gefunden";
            }
        }
        catch (Exception ex)
        {
            errorMessage = $"Fehler: {ex.Message}";
        }
        finally
        {
            isLoading = false;
        }
    }
}